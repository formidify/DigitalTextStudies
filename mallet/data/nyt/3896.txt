The measure now goes to the House, where it faces strong opposition.